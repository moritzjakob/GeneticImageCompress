# ImageCompression


# Genetic Algorithm for Color Palette Optimization

## Project Overview

This project implements a Genetic Algorithm (GA) for optimizing color palettes to approximate images with a limited number of colors. The GA evolves palettes to minimize the difference between the original and compressed image, using metrics like PSNR (Peak Signal-to-Noise Ratio). For a detailed explanation of the methodology and results, refer to the report in the docs folder.

---

## Folder Structure

- `images/`  
  Contains the input images used for experiments.

- `experiments/results/`  
  Stores the output images generated by the GA after optimization.

- `experiments/ImagesReport/`  
  Contains images generated for the report during the experiments.

- `genetic_algorithm/`  
  Contains GA implementation files:  
  - `ga.py` â€” main genetic algorithm logic  
  - `fitness.py` â€” fitness evaluation functions  
  - `crossover_operators.py` â€” crossover operators  
  - `mutation_operators.py` â€” mutation operators  
  - `individual.py` â€” individual representation  
  - `__init__.py` â€” package initializer 

- `utils/`  
  Contains utility functions:  
  - `image_io.py` â€” image loading, saving, and palette visualization  
  - `color_palette_utils.py` â€” palette generation functions 
  
- `requirements.txt`  
  Lists the required Python packages to run the project.

- `main.py`  
  Entry point to run the GA with configurable parameters.

---

## Installation and Setup

1. **Install required packages**:

```bash
pip install -r requirements.txt

Run the genetic algorithm:
The main script is main.py. It runs the GA on the specified image and saves output images in the experiments/results/ folder.

python main.py


Modify main.py to change parameters such as:

image_path â€” path to input image
Fitness_function - PSNR or MSE
GA parameters like num_colors, max_generations, population_size, etc.
Choice of crossover and mutation functions

Usage Example:

from utils.image_io import load_image, save_image
from genetic_algorithm.ga import run_genetic_algorithm
from genetic_algorithm.fitness import compute_fitness_psnr
from genetic_algorithm.crossover_operators import random_crossover
from genetic_algorithm.mutation_operators import mutate_palette_random
from utils.color_palette_utils import generate_palettes

image = load_image("images/bird.jpg")

# Has to match the number of color and Population size (Population = number of palettes)
palettes = generate_palettes(num_colors_per_palette=16) # Has to 

palette, result_image, history = run_genetic_algorithm(
    image=image,
    num_colors=16,
    max_generations=50,
    population_size=20,
    crossover_prob=0.85,
    mutation_prob=0.2,
    fixed_palette=palettes,
    fitness_function=compute_fitness_psnr,
    crossover_function=random_crossover,
    mutation_function=mutate_palette_random,
    target_fitness=50
)

save_image(result_image, "experiments/results/bird_result.jpg")


Experiments and Tests:

Baseline Configuration:
The baseline setup is used as a reference point for all experiments with the following parameters:

Number of colors per palette: 16
Maximum generations: 50
Population size: 20
Crossover probability: 0.85
Mutation probability: 0.2
Input image: bird.jpg
Fitness function: compute_fitness_psnr
Mutation function: mutate_palette_random
Target fitness: 50
Random seed: 45
Number of runs: 5 (to average results and reduce randomness)


Tests Performed:

Crossover Tests
Test 1 Random Crossover = random_crossover
Test 2 Segmented Crossover = segmented_crossover
Test 3 Uniform Crossover = uniform_crossover_palette
Test 4 Blend Crossover = blx_alpha_crossover_palette

Mutation Tests
Test 5 Fandom Mutation = mutate_palette_random
Test 6 Gaussian Mutation = gaussian_mutation_multi
Test 7 Component Mutation = component_wise_mutation
Test 8 Random Feset Mutation = random_resetting_mutation

Population Tests
Test 9 Small (population_size = 20)
Test 10 Medium (population_size = 50)
Test 11 Big (population_size = 150)

Crossover Probability Tests (population_size = 50)
Test 12 (crossover_prob = 0.7)
Test 13 (crossover_prob = 0.5)
Test 14 (crossover_prob = 0.85)
Test 15 (crossover_prob = 0.95)

Mutation Probability Tests (population_size = 50)
Test 16 (mutation_prob = 0.3)
Test 17 (mutation_prob = 0.2)
Test 18 (mutation_prob = 0.1)


Max Generations Tests (population_size = 50)
Test 19 (max_generations = 50)
Test 121 (max_generations = 150) 3 runs
Test 21 (max_generations = 300) 3 runs


Color Compression Tests with Different Palette Sizes:

Bird Image (original colors ~122,386)
Test 22 with palette size 8 colors
Test 23 with palette size 16 colors
Test 24 with palette size 64 colors

Pictures Image (original colors ~311,120)
Test 25 with palette size 8 colors
Test 26 with palette size 16 colors
Test 27 with palette size 64 colors

Tiger Image (original colors ~36,471)
Test 28 with palette size 8 colors
Test 29 with palette size 16 colors
Test 30 with palette size 64 colors



How to Reproduce Experiments:

Set the parameters in main.py or create your own experiment scripts by importing the run_genetic_algorithm function.
For each test, set the desired crossover operator:
from genetic_algorithm.crossover_operators import segmented_crossover
or uniform_crossover_palette, blx_alpha_crossover_palette random_crossover

Run multiple runs by looping over the run_genetic_algorithm call, save the output images and record runtime and fitness.

Save the resulting images in experiments/results/ and palette visualizations if needed.


Notes:

The fitness function used (compute_fitness_psnr) returns a negative PSNR score because the GA minimizes fitness.
The random seed is set to 45 for reproducibility.
The final_palette.png image is generated at the end of the GA run showing the best palette with metadata.

If you have questions or need further help running or extending the code, feel free to reach out!
---

## ðŸ“„ Additional Resources

* [Project Report PDF](docs/Jakob_Moritz_Image_Compression.pdf) â€” full report with details of the experiments
